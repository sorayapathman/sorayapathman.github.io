{"ast":null,"code":"var _jsxFileName = \"/Users/sorayapathman/Documents/GitHub/sorayapathman.github.io/src/components/PasswordPage.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport styles from \"./PasswordPage.css\";\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\nimport firebaseApp from \"./Firebase/firebase\";\nimport { getDatabase } from \"firebase/database\";\nimport { AuthContext } from './Firebase/Auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PasswordPage(_ref) {\n  _s();\n\n  let {\n    authenticateUser\n  } = _ref;\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorString, setErrorString] = useState('placeholder');\n  const [warningClass, setWarningClass] = useState(\"submit-warning-hidden\");\n  const [modalState, setModalState] = useState(\"initial\");\n  const [authenticated, setAuthenticated] = useState(false);\n  const {\n    currentUser,\n    userData\n  } = useContext(AuthContext);\n\n  const emailInput = e => {\n    setEmail(e.target.value);\n  };\n\n  const passwordInput = e => {\n    setPassword(e.target.value);\n  };\n\n  useEffect(() => {\n    if (currentUser === null || currentUser === undefined) setModalState(\"no-user-found\");\n  }, [currentUser]);\n\n  const attemptSubmission = e => {\n    e.preventDefault();\n    const auth = getAuth();\n    signInWithEmailAndPassword(auth, email, password).then(userCredential => {\n      // Signed in \n      const user = userCredential.user;\n      getDatabase();\n      setAuthenticated(true);\n      authenticateUser();\n      setModalState(\"authenticated\");\n      setWarningClass(\"submit-warning-hidden\");\n      setEmail(\"\");\n      setPassword(\"\"); // setUser(user);\n    }).catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      console.error(error);\n      setErrorString(\"invalid email and/or password - please try again\");\n      setWarningClass(\"submit-warning\"); // setEmail(\"\");\n      // setPassword(\"\");\n    }); // if(email === validEmail && password === validPassword){\n    // setAuthenticated(true);\n    // authenticateUser();\n    // setModalState(\"authenticated\");\n    // setWarningClass(\"submit-warning-hidden\");\n    // setEmail(\"\");\n    // setPassword(\"\");\n    // }\n    // else if(email === validEmail){\n    //     setErrorString(\"incorrect password - please try again\");\n    //     setWarningClass(\"submit-warning\");\n    //     setPassword(\"\");\n    // } else if(password === validPassword){\n    //     setErrorString('invalid email - please try again')\n    //     setWarningClass(\"submit-warning\");\n    //     setEmail(\"\");\n    //     setPassword(\"\");\n    // } else {\n    // setErrorString('invalid email and password - please try again')\n    // setWarningClass(\"submit-warning\");\n    // setEmail(\"\");\n    // setPassword(\"\");\n    // }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: modalState,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'password-block-' + modalState,\n      children: modalState === 'no-user-found' && /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"password-header\",\n          children: [\"please enter your email\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"text-input\",\n            value: email,\n            onChange: e => emailInput(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"password-header\",\n          children: [\"please enter the password\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"text-input\",\n            value: password,\n            onChange: e => passwordInput(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          className: \"submit-button\",\n          value: \"submit\",\n          onClick: attemptSubmission\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: warningClass,\n          children: errorString\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 48\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PasswordPage, \"AG1kqH+j6F4GVEM9S5lxuqQ3g80=\");\n\n_c = PasswordPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"PasswordPage\");","map":{"version":3,"sources":["/Users/sorayapathman/Documents/GitHub/sorayapathman.github.io/src/components/PasswordPage.js"],"names":["React","useState","useEffect","useContext","styles","getAuth","signInWithEmailAndPassword","firebaseApp","getDatabase","AuthContext","PasswordPage","authenticateUser","email","setEmail","password","setPassword","errorString","setErrorString","warningClass","setWarningClass","modalState","setModalState","authenticated","setAuthenticated","currentUser","userData","emailInput","e","target","value","passwordInput","undefined","attemptSubmission","preventDefault","auth","then","userCredential","user","catch","error","errorCode","code","errorMessage","message","console"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState, useEffect, useContext } from 'react'\nimport styles from \"./PasswordPage.css\"\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\nimport firebaseApp from \"./Firebase/firebase\";\nimport { getDatabase } from \"firebase/database\";\nimport { AuthContext } from './Firebase/Auth'\n\nexport default function PasswordPage( { authenticateUser } ) {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorString, setErrorString] = useState('placeholder');\n    const [warningClass, setWarningClass] = useState(\"submit-warning-hidden\");\n    const [modalState, setModalState] = useState(\"initial\");\n    const [authenticated, setAuthenticated] = useState(false);\n\n    const { currentUser, userData } = useContext(AuthContext);\n\n    const emailInput = (e) => {\n        setEmail(e.target.value);\n    }\n\n    const passwordInput = (e) => {\n        setPassword(e.target.value);\n    }\n\n    useEffect(() => {\n        if(currentUser === null || currentUser === undefined)\n            setModalState(\"no-user-found\");\n      }, [currentUser])\n\n    const attemptSubmission = (e) => {\n        e.preventDefault();\n\n        const auth = getAuth();\n\n        signInWithEmailAndPassword(auth, email, password)\n          .then((userCredential) => {\n            // Signed in \n            const user = userCredential.user;\n\n            getDatabase()\n            setAuthenticated(true);\n            authenticateUser();\n            setModalState(\"authenticated\");\n            setWarningClass(\"submit-warning-hidden\");\n            setEmail(\"\");\n            setPassword(\"\");\n            // setUser(user);\n          })\n          .catch((error) => {\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.error(error)\n\n            setErrorString(\"invalid email and/or password - please try again\")\n            setWarningClass(\"submit-warning\");\n            // setEmail(\"\");\n            // setPassword(\"\");\n          });\n\n        // if(email === validEmail && password === validPassword){\n            // setAuthenticated(true);\n            // authenticateUser();\n            // setModalState(\"authenticated\");\n            // setWarningClass(\"submit-warning-hidden\");\n            // setEmail(\"\");\n            // setPassword(\"\");\n        // }\n        // else if(email === validEmail){\n        //     setErrorString(\"incorrect password - please try again\");\n        //     setWarningClass(\"submit-warning\");\n        //     setPassword(\"\");\n        // } else if(password === validPassword){\n        //     setErrorString('invalid email - please try again')\n        //     setWarningClass(\"submit-warning\");\n        //     setEmail(\"\");\n        //     setPassword(\"\");\n        // } else {\n            // setErrorString('invalid email and password - please try again')\n            // setWarningClass(\"submit-warning\");\n            // setEmail(\"\");\n            // setPassword(\"\");\n        // }\n    }\n\n    return (\n        <div className={modalState}>\n            <div className={'password-block-' + modalState}>\n            {modalState === 'no-user-found' && <form className='form'>\n                <label className='password-header'>please enter your email\n                    <input type='text' className='text-input' value={email} onChange={(e) => emailInput(e)} />\n                </label>\n                <br />\n                <label className='password-header'>please enter the password\n                    <input type='password' className='text-input' value={password} onChange={(e) => passwordInput(e)} />\n                </label>\n                <input type='submit' className='submit-button' value='submit' onClick={attemptSubmission}/>\n                <span className={warningClass}>{errorString}</span>\n            </form>}\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}